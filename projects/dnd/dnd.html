<style>
    .draggable-div {
        position: absolute;
    }
</style>

<div id="app">
    <button id="addDiv">добавить div</button>
</div>

<script>
    window.onload = function(){ 
        const homeworkContainer = document.querySelector('#app');
    

        

        function createDiv() {
            const element = document.createElement('div');
            element.setAttribute('draggable', true);

            function getRandomInt(max) {
                return Math.floor(Math.random() * max);
            }

            let red = getRandomInt(255);
            let green = getRandomInt(255);
            let blue = getRandomInt(255);

            element.style.position = 'absolute';
            element.style.top = getRandomInt(300);
            element.style.left = getRandomInt(300);
            element.style.width = 10 + getRandomInt(300);
            element.style.height = 10 + getRandomInt(300);
            element.style.backgroundColor = "rgb(" + red + "," + green + "," + blue + ")";

            
            return element;
        }

        const addDivButton = homeworkContainer.querySelector('#addDiv');

        addDivButton.addEventListener('click', function () {
            const div = createDiv();
            homeworkContainer.appendChild(div);

            div.onmousedown = function(event) { //DnD
                moveAt(event.pageX, event.pageY);
                function moveAt(pageX, pageY) {
                    div.style.left = pageX - div.offsetWidth / 2 + 'px';
                    div.style.top = pageY - div.offsetHeight / 2 + 'px';
                }

                function onMouseMove(event) {
                    moveAt(event.pageX, event.pageY);
                }

                document.addEventListener('mousemove', onMouseMove);

                div.onmouseup = function() {
                    document.removeEventListener('mousemove', onMouseMove);
                    div.onmouseup = null;
                };

                div.ondragstart = function() {
                    return false;
                };

            };
        });
    };
</script>